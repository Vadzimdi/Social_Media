{% extends "web/layout.html" %}

{% load humanize %}

{% block body %}
    <h2>All Posts</h2>
    {% if user.is_authenticated %}
        <br>
        <h4>New Post</h4>
        <form action="{% url 'newpost' %}" method="post">
            {% csrf_token %}
            <div class="mb-3">
                <textarea class="form-control" rows="3" name="content"></textarea>
                <button style="margin-top: 10px;" type="submit" class="btn btn-primary mb-3">Post</button>
            </div>
        </form>
    {% else %}   
        <br> 
    {% endif %}
    {% for post in allposts %}
        <div class="card" style="max-width: 50rem;">
            <div style="background-color:lightgray;" class="card-header">
                <strong>Post by: {{ post.user }}</strong> 
            </div>
            <div class="card-body">
                <h6 class="card-title">{{ post.content }}</h6>
                {% if current_user == post.user %}
                <a href="#" class="btn btn-outline-primary btn-sm">Edit</a>
                {% endif %}   
            </div>
            <div class="card-footer">
                <small>{{ post.creation_date|naturaltime }}</small>
            </div>     
        </div>
        <br>
    {% endfor %}
      
{% endblock %}